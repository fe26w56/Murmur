# Murmur - ドキュメントレビュー報告書（第3回）

> レビュー実施日: 2026-02-16
> 対象: 01-requirements.md / 02-api-research.md / 03-system-design.md（第2回レビュー後の修正版）
> レビュー観点: 第2回レビュー指摘事項の対応状況、新規発見事項
>
> **前回レビュー**: [review2.md](./archived/review2.md)

---

## 総合評価

| 対象 | 前回 | 今回 | 変化 | 一言 |
|------|------|------|------|------|
| 要件定義書 | B+ | **A-** | ↑↑ | Critical/Major全対応。残りはMinorのみ |
| API調査レポート | B+ | **A-** | ↑↑ | WMT24帰属修正完了。残りはMinorのみ |
| 設計書 | B+ | **A-** | ↑↑ | アーキテクチャ健全、RLS/セッション管理完成。残りはMinorのみ |

**総評**: 全ドキュメントがA-に到達。Critical/Major指摘はゼロ。残りは全てMinor（ドキュメントの正確性向上のための微修正）。**MVPの実装着手に必要な品質を十分に満たしている。**

---

## 第2回レビュー指摘事項の対応状況

### Critical

| # | 指摘 | 対応状況 | 詳細 |
|---|------|----------|------|
| NC1 | コンテキスト調査エンドポイント配置 | ✅ 完了 | Supabase Edge Functionsに委譲、Next.js APIはポーリング用ラッパーのみ |
| NC2 | セッションライフサイクル管理 | ✅ 完了 | POST/PATCH APIを追加、2状態モデル（active/completed）で設計 |

### Major

| # | 指摘 | 対応状況 | 詳細 |
|---|------|----------|------|
| NM1 | テンプレート内容矛盾 | ✅ 完了 | 「用語集・概要・主要フレーズ」に統一、台本全文は含めないと明記 |
| NM2 | 音声フォーマット不整合 | ✅ 完了 | `audio/webm;codecs=opus` に全ドキュメントで統一 |
| NM3 | 音声保存ポリシー矛盾 | ✅ 完了 | 「音声データは保存せず、リアルタイムストリーミングのみ」に統一 |
| NM4 | 翻訳表示順序保証 | ✅ 完了 | `sequenceNumber` による順序制御を設計追加 |
| NM5 | 利用時間追跡 | ✅ 完了 | `get_monthly_usage` RPC関数とクライアント制御を追加 |
| M1 | ユーザーストーリー | ✅ 完了 | US1-US6を独立Section 4として追加 |
| M4 | プライバシーポリシー | ✅ 完了 | 要件定義書にプライバシーサブセクション追加 |
| M9 | MVPリスト整合性 | ✅ 完了 | 認証とプライバシーポリシーをPhase 1に追加 |
| M10 | AssemblyAI WER整合性 | ✅ 完了 | Section 1表をUniversal-3 Proに更新 |
| M15 | WMT24帰属誤り | ✅ 完了 | Claude 3.5 Sonnetに正しく帰属 |

### 前回からの未対応（設計上の判断として保留）

| # | 指摘 | 状態 | 理由 |
|---|------|------|------|
| M2 | オンボーディング | 保留 | MVP後に検討 |
| M5 | アクセシビリティ | 保留 | MVP後に検討 |
| M7 | テスト要件 | 保留 | 別ドキュメントで管理 |
| M13 | 翻訳品質定量比較 | 保留 | Phase 2のABテスト時に実施 |

---

## 新規発見事項（Minor のみ）

### 要件定義書

| #   | 指摘                                     | 重要度   | 対応状況                     |
| --- | -------------------------------------- | ----- | ------------------------ |
| m1  | セクション相互参照エラー（5.1→「8. リスクと対策」は「9.」が正しい） | Minor | ✅ 修正済み                   |
| m2  | エクスポート機能がコア機能に記載されているがPhase 3          | Minor | 情報（実装時に注意）               |
| m3  | 「言語ペア」設定がMVPの画面構成に含まれるが多言語はPhase 3     | Minor | 情報（MVP実装時にプレースホルダーとして扱う） |
| m4  | リスク表の「コンテキストキャッシュ」がPhase 2であることが不明     | Minor | 情報                       |
| m5  | AI自動調査がコア機能に詳述されているがMVPはテキスト入力のみ       | Minor | 情報（Phase 2のビジョンとして適切）    |

### API調査レポート

| # | 指摘 | 重要度 | 対応状況 |
|---|------|--------|----------|
| m1 | Deepgram WER改善率54.3% vs 公式54.2%の誤差 | Minor | 情報（実質的な影響なし） |
| m2 | Deepgramレイテンシ<300msとAssemblyAIベンチマーク516msの測定手法差異 | Minor | ✅ 修正済み（注釈追加） |
| m3 | Section 1とSection 5のAssemblyAI記述が重複 | Minor | 情報（構造的好み、エラーではない） |

### 設計書

| #   | 指摘                                                          | 重要度   | 対応状況            |
| --- | ----------------------------------------------------------- | ----- | --------------- |
| m1  | ER図のprofilesテーブルで`updated_at`が重複（`created_at`が欠落）           | Minor | ✅ 修正済み          |
| m2  | テンプレートDDLとJSONの不整合（id型、description列、sort_order）             | Minor | ✅ 修正済み（DDL側を調整） |
| m3  | ER図にcontextsの`error_message`カラムが欠落                          | Minor | ✅ 修正済み          |
| m4  | アーキテクチャ図のSlidingWindow接続線が誤解を招く可能性                          | Minor | 情報（実装時に注意）      |
| m5  | POST /api/sessionsでstarted_at設定のロジックが暗黙的                    | Minor | 情報（文章で補足済み）     |
| m6  | Tavily/Firecrawl APIキーの管理場所がVercel envと記載だがEdge Functionで使用 | Minor | ✅ 修正済み          |

---

## 修正対応サマリ

本レビューで発見されたMinor指摘のうち、以下を即時修正:

1. **requirements.md**: セクション相互参照「8.」→「9.」に修正
2. **api-research.md**: AssemblyAIレイテンシに測定手法の注釈追加
3. **design.md**: ER図のprofilesテーブル修正（`created_at` + `updated_at`）
4. **design.md**: ER図にcontextsの`error_message`追加
5. **design.md**: テンプレートDDL修正（`id TEXT PRIMARY KEY`、`description TEXT`追加）
6. **design.md**: APIキー管理表のTavily/FirecrawlをSupabase Edge Function secretsに修正

---

## 結論

**全3ドキュメントがA-評価に到達。Critical/Major指摘ゼロ。MVPの実装着手を推奨する。**

残存するMinor指摘は「情報提供」レベルであり、実装フェーズで自然に解決されるか、Phase 2以降の検討事項である。ドキュメントの品質はMVP開発の基盤として十分であり、これ以上のレビューサイクルは費用対効果が低い。
